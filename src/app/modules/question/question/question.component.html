<div *ngIf="question">
    <h2 class="title">{{question.question}}</h2>

    <div class="input-button-group" *ngIf="question.type == 'prop'">
        <div *ngFor="let response of getResponseArray()">
          <button (click)="userAnswer = response.label; selectedAnswer = response.key;  onAnswerSubmit()">{{response.label}}</button>
        </div>
    </div>

    <div *ngIf="question.type == 'text'">
        <input [(ngModel)]="userAnswer" placeholder="">
        <button class="valider" (click)="onAnswerSubmit()">Valider</button>
    </div>

    <div *ngIf="question.type == 'subquestion'">

        <div *ngFor="let subquestion of subquestionsArray">
            <p>{{subquestion.question}}</p>

            <div *ngIf="subquestion.type == 'prop'">
                <div *ngFor="let response of getResponseArraySubquestion(subquestion)">
                  <button (click)="subquestion.userAnswer = response.label">{{response.label}}</button>
                </div>
            </div>
        
            <div *ngIf="subquestion.type == 'text'">
                <input [(ngModel)]="subquestion.userAnswer" placeholder="">
            </div>


            <div *ngIf="subquestion.type == 'checkboxmultipleaide'" class="checkbox-group">
                <div *ngFor="let response of getResponseArraySubquestion(subquestion)" class="checkbox-wrapper">
                    
                    <label class="custom-checkbox">
                        <input
                        type="checkbox"
                        name="aideAnswer"
                        [value]="response.label"
                        (change)="onAideCheckboxChange($event, response, subquestion)"
                        [checked]="isChecked(subquestion, response.label)"
                        />
                        <span class="checkmark"></span>
                        <span class="text">{{ response.label }}</span>
                    </label>
                        
                </div>
            </div>

            <div *ngIf="subquestion.type == 'checkboxsingle'" class="checkbox-group">
                <div *ngFor="let response of getResponseArraySubquestion(subquestion)" class="checkbox-wrapper">
                  <label class="custom-checkbox">
                    <input
                      type="checkbox"
                      [value]="response.label"
                      (change)="onCheckboxChangeSubquestion($event, response, subquestion)"
                      [checked]="subquestion.userAnswer == response.label"
                    />
                    <span class="checkmark"></span>
                    <span class="text">{{ response.label }}</span>
                  </label>
                </div>
              </div>


        </div>
        <button class="valider" (click)="onAnswerSubmit()">Valider</button>
    </div>    
</div>

<app-dialogbox
  [visible]="showDialog"
  [message]="dialogMessage"
  (close)="showDialog = false"
  (confirm)="onDialogConfirm()">
</app-dialogbox>